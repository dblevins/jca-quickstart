<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Jca-quickstart : Get started with the Java EE Connector Architecture" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Jca-quickstart</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/dblevins/jca-quickstart">View on GitHub</a>

          <h1 id="project_title">Jca-quickstart</h1>
          <h2 id="project_tagline">Get started with the Java EE Connector Architecture</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/dblevins/jca-quickstart/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/dblevins/jca-quickstart/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>jca-quickstart</h1>

<p>Get started with the Java EE Connector Architecture</p>

<p>Our goal is to provide an entry point to successful development of JCA connectors. This very powerful part of the JavaEE spec is currently underestimated, as getting started with this technology has been quite difficult so far. In some forums it is even referred to as some sort of black art, which is fortunately only true if you try to get something done with JCA for the first time.
In order to demystify this technology we started this collection of explanations, examples, links and available connectors, hoping that it will help some of you to harness the possibilities of JCA.</p>

<h1>Foreword</h1>

<p>A few thoughts worth mentioning before we get started:</p>

<ul>
<li>If you ended up here you are most probably on the right track.</li>
<li>JCA does appear quite difficult in the beginning, although it is no kind of rocket science. Keep on going…</li>
<li>If you want things to change, you can always make suggestions for improvement. In fact this is highly appreciated. There is one good proposal about how to change inbound connectors already <a href="https://github.com/dblevins/mdb-improvements">here</a>.</li>
</ul><h1>General explanations</h1>

<p>JCA supports two ways of communication:</p>

<ul>
<li>inbound</li>
<li>outbound</li>
</ul><p>While inbound connectors are relatively simple to setup, outbound connectors require an additional step to configure the connection pool. Still, both are quite ok to use once you got the hang of how it works.</p>

<h1>Java EE Compatible Connectors</h1>

<ul>
<li>
<a href="http://xadisk.java.net/">http://xadisk.java.net/</a> (A connector providing transactional file I/O)</li>
<li>
<a href="https://github.com/ljnelson/drools-jca">https://github.com/ljnelson/drools-jca</a> </li>
<li>
<a href="http://genericjmsra.java.net/">http://genericjmsra.java.net/</a> (A connector to integrate JMS messaging into Java EE application servers)</li>
</ul><h2>Links</h2>

<ul>
<li>
<a href="https://github.com/dblevins/mdb-improvements">https://github.com/dblevins/mdb-improvements</a> (A proposal on how to improve writing inbound JCA connectors)</li>
<li>
<a href="http://blog.dblevins.com/2010/10/ejbnext-connectorbean-api-jax-rs-and.html">http://blog.dblevins.com/2010/10/ejbnext-connectorbean-api-jax-rs-and.html</a> (A good lookout on what could be done with an improved JCA API)</li>
<li>
<a href="http://jcp.org/en/jsr/detail?id=322">http://jcp.org/en/jsr/detail?id=322</a> (The JCA specification)</li>
</ul><h1>Examples</h1>

<h2>Adam Bien's connectorz</h2>

<p><a href="http://connectorz.adam-bien.com/">Adam Bien's connectorz</a> on adam-bien.com.</p>

<h3>What it does</h3>

<p>The sample project provides two connectors out-of-the-box:</p>

<ul>
<li>Work Manager: JCA implementation of java.util.concurrent.Executor</li>
<li>File Store: JCA implementation of transactional file access.</li>
</ul><p>The setup description below explains the setup of the file store conector.</p>

<h3>How to set it up...</h3>

<h4>…on Glassfish</h4>

<p>Prerequisites:</p>

<ul>
<li>Working maven installation (with the %PATH% variable pointing to your installation)</li>
<li>Glassfish (3.1.2 or later) installed and running (make sure the asadmin command is in your %PATH%)</li>
<li>
<a href="https://github.com/AdamBien/connectorz">Github repo</a> cloned to local drive</li>
</ul><h4>… using the command line</h4>

<p>Then perform the following steps to setup the files connector:</p>

<p>go to checked out project dir</p>

<p>cd $your_workspace$/connectorz/files</p>

<p>then do</p>

<pre><code>mvn install
</code></pre>

<p>wait until it's done, then do   </p>

<pre><code>cd store/target
asadmin deploy --name filesConnector jca-file-store.rar
asadmin create-connector-connection-pool --raname filesConnector --connectiondefinition org.connectorz.files.BucketStore files/pool
asadmin create-connector-resource --poolname files/pool jca/files

cd ../..
cd client/target
asadmin deploy jca-file-client.war
</code></pre>

<h4>… using Netbeans</h4>

<p>todo</p>

<h4>… using IntelliJ IDEA</h4>

<p>Use the command line, as IDEA currently does not support Resource Adapter Archives (.rar) with its own artifacts. Therefore you'd have to package the connector externally using maven anyway.</p>

<h4>… using Eclipse</h4>

<p>todo (volunteers wanted :-)</p>

<h4>Test it…</h4>

<p>Afterwards you can use your favorite REST client to test the application Adam provided with his example.
As a REST client you can use either <a href="http://curl.haxx.se/">curl</a> or <a href="http://code.google.com/p/rest-client/">rest-client</a>; or any other client of your choice.
The URI for creating a file is:</p>

<pre><code>http://localhost:8080/jca-file-client/v1/files/file_to_create
</code></pre>

<p>Be aware that you need to do a PUT request to store files and a GET with the same URI to retrieve a stored file.</p>

<h5>…with curl</h5>

<p>First create a file using the connector:</p>

<pre><code>curl -XPUT -H Content-type:text/plain --data-ascii MyTestContent http://localhost:8081/jca-file-client/v1/files/myFileId
</code></pre>

<blockquote>
<p>Note: Don't be sruprised, there will be no output from curl. You can add the -v option to see some output.</p>
</blockquote>

<p>Then retrieve it:</p>

<pre><code>curl -XGET -H Content-type:text/plain http://localhost:8081/jca-file-client/v1/files/myFileId
</code></pre>

<p>You should see <code>MyTestContent</code> as a result, proving that you got your file content back.</p>

<p>Next let's delete the file we just created:</p>

<pre><code>curl -XDELETE -H Content-type:text/plain http://localhost:8081/jca-file-client/v1/files/myFileId
</code></pre>

<p>And retrieve it again:</p>

<pre><code>curl -v -XGET -H Content-type:text/plain http://localhost:8081/jca-file-client/v1/files/myFileId
</code></pre>

<p>This time the output should look like this:</p>

<pre><code>* About to connect() to localhost port 8081 (#0)
*   Trying 127.0.0.1... connected
&gt; GET /jca-file-client/v1/files/myFileId HTTP/1.1
&gt; User-Agent: curl/7.22.0 (amd64-pc-win32) libcurl/7.22.0 OpenSSL/0.9.8r zlib/1.2.5
&gt; Host: localhost:8081
&gt; Accept: */*
&gt; Content-type:text/plain
&gt;
&lt; HTTP/1.1 204 No Content
&lt; X-Powered-By: Servlet/3.0 JSP/2.2 (GlassFish Server Open Source Edition 3.1.2.2 Java/Oracle Corporation/1.7)
&lt; Server: GlassFish Server Open Source Edition 3.1.2.2
&lt; Date: Thu, 15 Nov 2012 15:01:06 GMT
&lt;
* Connection #0 to host localhost left intact
* Closing connection #0
</code></pre>

<p>You can see that it states in the response that there was no content (HTTP code 204).</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Jca-quickstart maintained by <a href="https://github.com/dblevins">dblevins</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
